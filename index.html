<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rebalance Portfolio Ratio</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 100%;
        }

        h2 {
            color: #333;
            text-align: center;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #555;
        }

        input[type="number"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }

        button {
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

        h3 {
            color: #333;
            text-align: center;
            margin-top: 20px;
        }

        p#result {
            font-size: 18px;
            text-align: center;
            color: #007bff;
            font-weight: bold;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Rebalance Portfolio Ratio</h2>
        <p>Enter the amounts for sections A, B, C, and D:</p>
        <label for="amountA">Amount in section A:</label>
        <input type="number" id="amountA" name="amountA" />
        
        <label for="amountB">Amount in section B:</label>
        <input type="number" id="amountB" name="amountB" />

        <label for="amountC">Amount in section C:</label>
        <input type="number" id="amountC" name="amountC" />

        <label for="amountD">Amount in section D:</label>
        <input type="number" id="amountD" name="amountD" />

        <p>Enter the ratios (for sections A, B, C, and D):</p>
        <label for="ratioA">Ratio for A:</label>
        <input type="number" id="ratioA" name="ratioA" value="2" />
        
        <label for="ratioB">Ratio for B:</label>
        <input type="number" id="ratioB" name="ratioB" value="1" />

        <label for="ratioC">Ratio for C:</label>
        <input type="number" id="ratioC" name="ratioC" value="0" />

        <label for="ratioD">Ratio for D:</label>
        <input type="number" id="ratioD" name="ratioD" value="0" />

        <button onclick="calculateSplit()">Calculate</button>

        <h3>Results:</h3>
        <p id="result"></p>
    </div>

    <script>
        function calculateSplit() {
            // Retrieve values from inputs
            let amountA = parseFloat(document.getElementById("amountA").value) || 0;
            let amountB = parseFloat(document.getElementById("amountB").value) || 0;
            let amountC = parseFloat(document.getElementById("amountC").value) || 0;
            let amountD = parseFloat(document.getElementById("amountD").value) || 0;

            let ratioA = parseFloat(document.getElementById("ratioA").value) || 0;
            let ratioB = parseFloat(document.getElementById("ratioB").value) || 0;
            let ratioC = parseFloat(document.getElementById("ratioC").value) || 0;
            let ratioD = parseFloat(document.getElementById("ratioD").value) || 0;

            // Check if at least one ratio is entered
            let totalRatio = ratioA + ratioB + ratioC + ratioD;
            if (totalRatio === 0) {
                document.getElementById("result").textContent = "Please enter at least one ratio.";
                return;
            }

            // Calculate the total amount
            let totalAmount = amountA + amountB + amountC + amountD;

            // Calculate the target amounts
            let targetA = (ratioA / totalRatio) * totalAmount;
            let targetB = (ratioB / totalRatio) * totalAmount;
            let targetC = (ratioC / totalRatio) * totalAmount;
            let targetD = (ratioD / totalRatio) * totalAmount;

            // Calculate differences
            let differences = [
                { part: 'A', amount: amountA - targetA },
                { part: 'B', amount: amountB - targetB },
                { part: 'C', amount: amountC - targetC },
                { part: 'D', amount: amountD - targetD }
            ];

            // Separate excess and deficit amounts
            let excesses = differences.filter(d => d.amount > 0);
            let deficits = differences.filter(d => d.amount < 0);

            let result = '';

            // Transfer money from excess to deficit
            for (let deficit of deficits) {
                for (let excess of excesses) {
                    let transferAmount = Math.min(-deficit.amount, excess.amount);
                    if (transferAmount > 0) {
                        result += `Transfer ${transferAmount.toFixed(2)} from ${excess.part} to ${deficit.part}\n`;
                    }
                    deficit.amount += transferAmount;
                    excess.amount -= transferAmount;
                    if (deficit.amount >= 0) break;
                }
            }

            // Final results summary
            if (result === '') {
                result = "No transfers needed.\n";
            }

            result += `\nFinal balances:\nA: ${targetA.toFixed(2)}\nB: ${targetB.toFixed(2)}\nC: ${targetC.toFixed(2)}\nD: ${targetD.toFixed(2)}`;

            // Display results
            document.getElementById("result").textContent = result;
        }
    </script>
</body>
</html>
